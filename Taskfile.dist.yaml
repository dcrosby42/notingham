version: '3'

tasks:
  test:
    desc: Run unit tests
    cmds:
      - go test ./...

  install:
    desc: Local installation
    cmds:
      - go install

  run:
    deps: [install]
    desc: Install and launch notingham server against the notebooks dir
    cmds:
      - notingham server --host 127.0.0.1 --port 9000 --data-dir notebooks

  run-local:
    deps: [install]
    desc: Install and launch notingham server, but loading web assets directly from the public site dir
    cmds:
      - notingham server --host 127.0.0.1 --port 9000 --data-dir notebooks --site-dir public

  run-old:
    deps: [install]
    desc: Install and launch notingham server, using OLD DB IMPL, loading web assets directly from the public site dir
    cmds:
      - notingham server --host 127.0.0.1 --port 9000 --data-dir notebooks --site-dir public --old-style
